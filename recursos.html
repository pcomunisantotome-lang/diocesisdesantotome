<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recursos - Diócesis de Santo Tomé</title>
    
    <!-- Metadatos para Redes Sociales (Open Graph) -->
    <meta property="og:title" content="Recursos Pastorales - Diócesis de Santo Tomé">
    <meta property="og:description" content="Encuentra subsidios, guiones y otros materiales de apoyo diocesano.">
    <meta property="og:image" content="https://firebasestorage.googleapis.com/v0/b/diocesisdesantotome.firebasestorage.app/o/LOGOS%2FEncabezado%20para%20Paginas%20(1080%20x%201080%20px).png?alt=media&token=f798c85d-1ffc-4a30-950e-8ca7f0bc7510">
    <meta property="og:url" content="https://diocesisdesantotome.com/recursos.html"> <!-- URL de esta página -->
    <meta property="og:type" content="website">
    <meta property="fb:app_id" content="1497738074977879" />

    <link rel="icon" href="https://firebasestorage.googleapis.com/v0/b/diocesisdesantotome.firebasestorage.app/o/LOGOS%2Flogo%20iglesia%20samaritana.png?alt=media&token=56fd32c1-bb7d-4537-83f7-ace6662ff768" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gray-50">

    <header class="bg-white/95 backdrop-blur-sm shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-4 lg:px-6 py-2.5">
            <div class="flex flex-wrap justify-between items-center">
                <a href="./index.html" class="flex items-center group">
                    <img src="https://firebasestorage.googleapis.com/v0/b/diocesisdesantotome.firebasestorage.app/o/LOGOS%2Flogo%20iglesia%20samaritana.png?alt=media&token=56fd32c1-bb7d-4537-83f7-ace6662ff768" class="mr-3 h-12 transition-transform duration-300 group-hover:rotate-[10deg] group-hover:scale-110" alt="Logo Diócesis" />
                    <div class="hidden sm:flex sm:flex-col">
                        <span class="text-xl font-semibold whitespace-nowrap text-gray-800 transition-colors duration-300 group-hover:text-blue-600">Diócesis de Santo Tomé</span>
                        <span class="text-sm font-light italic text-gray-500">Corrientes, Argentina</span>
                    </div>
                </a>
                 <div class="flex items-center lg:order-2">
                    <a href="./index.html" class="text-gray-800 hover:bg-gray-50 focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-4 lg:px-5 py-2 lg:py-2.5 mr-2 focus:outline-none">Volver al Inicio</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="py-12">
        <div class="container mx-auto px-6">
            <h1 class="text-4xl font-bold text-center text-gray-800 mb-12">Recursos Pastorales</h1>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <div class="bg-white rounded-lg shadow-lg p-8 flex flex-col items-center text-center">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Subsidios Pastorales</h3>
                    <p class="text-gray-600 mb-6 flex-grow">Material de apoyo diocesano para agentes de pastoral y comunidades.</p>
                    <button id="open-subsidios-modal-btn" class="w-full mt-auto bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold py-3 px-8 rounded-lg transition">Ver Subsidios</button>
                </div>
                <div class="bg-white rounded-lg shadow-lg p-8 flex flex-col items-center text-center">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Guiones Diocesanos</h3>
                    <p class="text-gray-600 mb-6 flex-grow">Guiones Diocesanos</p>
                    <button id="download-scripts-btn" class="w-full mt-auto bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold py-3 px-8 rounded-lg transition">Ver Guiones</button>
                </div>
            </div>

            <!-- Nuevo Módulo de Banner movido abajo -->
            <section class="mt-16 max-w-lg mx-auto">
                <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                    <img src="https://firebasestorage.googleapis.com/v0/b/diocesisdesantotome.firebasestorage.app/o/imagenes%2FScreenshot_20250901_210152_Adobe%20Acrobat.jpg?alt=media&token=397dc074-6085-4126-aa9f-ae17cfbac1fe" alt="Banner Anuncio" class="w-full">
                    <div class="p-6 text-center">
                        <div class="flex flex-col sm:flex-row gap-4 justify-center">
                            <a href="https://drive.google.com/uc?export=download&id=15cts-c6V7Nh9t-pcIlur4oZt7bVi-J2Q" download class="inline-block w-full sm:w-auto bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white font-bold py-3 px-8 rounded-lg transition-transform duration-300 transform hover:scale-105">
                                Descargar
                            </a>
                            <button id="share-material-btn" class="inline-flex items-center justify-center w-full sm:w-auto bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-lg transition">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg>
                                Compartir
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="bg-gray-900 text-white py-8 mt-12">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 Diócesis de Santo Tomé. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- Modal para Guiones Diocesanos -->
    <div id="scripts-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col">
            <div class="p-4 border-b flex justify-between items-center">
                <h2 class="text-xl font-bold text-gray-800">Guiones Diocesanos</h2>
                <button id="close-scripts-modal-btn" class="text-2xl font-bold text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            <div id="scripts-modal-list" class="p-6 overflow-y-auto space-y-3">
                <p>Cargando guiones...</p>
            </div>
        </div>
    </div>

    <!-- Modal para Subsidios Pastorales -->
    <div id="subsidios-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col">
            <div class="p-4 border-b flex justify-between items-center">
                <h2 class="text-xl font-bold text-gray-800">Subsidios Pastorales</h2>
                <button id="close-subsidios-modal-btn" class="text-2xl font-bold text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            <div class="p-6 overflow-y-auto">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Subsidio 2022 -->
                    <div class="flex flex-col items-center text-center p-4 rounded-lg hover:shadow-md transition-shadow">
                        <img src="https://firebasestorage.googleapis.com/v0/b/diocesisdesantotome.firebasestorage.app/o/Subsidios%20Pastorales%2Fsubsidio-2022.png?alt=media&token=66615e5d-e26a-404f-9aa0-7a14c6ad09bb" alt="Subsidio 2022" class="w-full h-auto rounded-lg shadow-sm mb-4">
                        <h3 class="font-bold mb-2">Subsidio 2022</h3>
                        <a href="https://drive.google.com/uc?export=download&id=1vc7jL7_NdFmfFGL_qR0Uq4tQuUr53iPW" download class="w-full mt-auto bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition">Descargar</a>
                    </div>
                    <!-- Subsidio 2023-2024 -->
                    <div class="flex flex-col items-center text-center p-4 rounded-lg hover:shadow-md transition-shadow">
                        <img src="https://firebasestorage.googleapis.com/v0/b/diocesisdesantotome.firebasestorage.app/o/Subsidios%20Pastorales%2Fsubsidio2023.png?alt=media&token=6a0dcb16-29dd-42df-b2b9-3e078d5f46ca" alt="Subsidio 2023-2024" class="w-full h-auto rounded-lg shadow-sm mb-4">
                         <h3 class="font-bold mb-2">Subsidio 2023-2024</h3>
                        <a href="https://drive.google.com/uc?export=download&id=1-SrIpaRJPrcivXNd6Q9T-nP6bLzfm2Z6" download class="w-full mt-auto bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition">Descargar</a>
                    </div>
                    <!-- Subsidio 2025 -->
                    <div class="flex flex-col items-center text-center p-4 rounded-lg hover:shadow-md transition-shadow">
                        <img src="https://firebasestorage.googleapis.com/v0/b/diocesisdesantotome.firebasestorage.app/o/Subsidios%20Pastorales%2FFOLLETO%20SUBSIDIO%202025%20(1).jpg?alt=media&token=8502703d-48af-4b84-a26f-ffb706b57940" alt="Subsidio 2025" class="w-full h-auto rounded-lg shadow-sm mb-4">
                         <h3 class="font-bold mb-2">Subsidio 2025</h3>
                        <a href="https://drive.google.com/uc?export=download&id=1lEtWl_xkuK_48xl67ClWojeFbczNjld2" download class="w-full mt-auto bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition">Descargar</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCIC457rky1NFQCas3uWFfIDVRBHfdbEAQ",
            authDomain: "diocesisdesantotome.firebaseapp.com",
            projectId: "diocesisdesantotome",
            storageBucket: "diocesisdesantotome.firebasestorage.app",
            messagingSenderId: "313851932898",
            appId: "1:313851932898:web:0b7e65d0da8d09d762aebb"
        };
        
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        const scriptsModal = document.getElementById('scripts-modal');
        const subsidiosModal = document.getElementById('subsidios-modal');
        const scriptsModalList = document.getElementById('scripts-modal-list');
        const shareMaterialBtn = document.getElementById('share-material-btn');

        async function openScriptsModal() {
            scriptsModal.classList.remove('hidden');
            scriptsModalList.innerHTML = '<p>Cargando guiones...</p>';
            try {
                const querySnapshot = await getDocs(query(collection(db, "scripts"), orderBy("createdAt", "desc")));
                scriptsModalList.innerHTML = '';
                if (querySnapshot.empty) {
                    scriptsModalList.innerHTML = '<p>No hay guiones disponibles.</p>';
                } else {
                    querySnapshot.forEach(doc => {
                        const script = doc.data();
                        const link = document.createElement('a');
                        link.href = script.downloadURL;
                        link.target = "_blank";
                        link.className = "block bg-gradient-to-r from-green-50 to-green-100 p-3 rounded-lg hover:from-green-100 hover:to-green-200 transition-all duration-200 text-green-800 font-medium text-left shadow-sm hover:shadow-md";
                        link.textContent = script.title;
                        scriptsModalList.appendChild(link);
                    });
                }
            } catch(e) {
                scriptsModalList.innerHTML = '<p class="text-red-600">Error al cargar los guiones.</p>';
            }
        }
        
        document.getElementById('download-scripts-btn').addEventListener('click', openScriptsModal);
        document.getElementById('close-scripts-modal-btn').addEventListener('click', () => scriptsModal.classList.add('hidden'));

        document.getElementById('open-subsidios-modal-btn').addEventListener('click', () => subsidiosModal.classList.remove('hidden'));
        document.getElementById('close-subsidios-modal-btn').addEventListener('click', () => subsidiosModal.classList.add('hidden'));
        
        shareMaterialBtn.addEventListener('click', async () => {
            const shareData = {
                title: 'Material Espiritual para la Peregrinación a Itatí',
                text: 'Descargá el material espiritual para la peregrinación a Itatí desde la página de Recursos de la Diócesis de Santo Tomé.',
                url: window.location.href,
            };
            try {
                if (navigator.share) {
                    await navigator.share(shareData);
                } else {
                    // Fallback for browsers that don't support Web Share API
                    navigator.clipboard.writeText(window.location.href).then(() => {
                        alert('Enlace copiado al portapapeles.');
                    });
                }
            } catch (err) {
                console.error('Error al compartir:', err);
            }
        });

    </script>
</body>
</html>

