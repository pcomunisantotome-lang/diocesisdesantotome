<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diócesis de Santo Tomé</title>
    <link rel="icon" href="https://firebasestorage.googleapis.com/v0/b/diocesisdesantotome.firebasestorage.app/o/LOGOS%2Flogo%20iglesia%20samaritana.png?alt=media&token=56fd32c1-bb7d-4537-83f7-ace6662ff768" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
        .news-skeleton {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            50% { opacity: .5; }
        }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Header / Navigation -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-4 lg:px-6 py-2.5">
            <div class="flex flex-wrap justify-between items-center">
                <a href="#" class="flex items-center">
                    <img src="https://firebasestorage.googleapis.com/v0/b/diocesisdesantotome.firebasestorage.app/o/LOGOS%2Flogo%20iglesia%20samaritana.png?alt=media&token=56fd32c1-bb7d-4537-83f7-ace6662ff768" class="mr-3 h-12" alt="Logo Diócesis" />
                    <div class="hidden sm:flex sm:flex-col">
                        <span class="text-xl font-semibold whitespace-nowrap text-gray-800">Diócesis de Santo Tomé</span>
                        <span class="text-sm font-light italic text-gray-500">Corrientes, Argentina</span>
                    </div>
                </a>
                <div class="flex items-center lg:order-2">
                    <a href="#donar" class="text-white bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 focus:ring-4 focus:ring-purple-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 focus:outline-none">Doná</a>
                    <button id="mobile-menu-button" type="button" class="inline-flex items-center p-2 ml-1 text-sm text-gray-500 rounded-lg lg:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Abrir menú principal</span>
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
                    </button>
                </div>
                <div class="hidden justify-between items-center w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu">
                    <ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0">
                        <li><a href="#inicio" class="block py-2 pr-4 pl-3 text-gray-700 hover:text-blue-600 lg:p-0">Inicio</a></li>
                        <li><a href="#noticias" class="block py-2 pr-4 pl-3 text-gray-700 hover:text-blue-600 lg:p-0">Noticias</a></li>
                        <li><a href="#recursos" class="block py-2 pr-4 pl-3 text-gray-700 hover:text-blue-600 lg:p-0">Recursos</a></li>
                        <li><a href="#fragiles" class="block py-2 pr-4 pl-3 text-gray-700 hover:text-blue-600 lg:p-0">Cuidado de los Frágiles</a></li>
                        <li><a href="#obispo" class="block py-2 pr-4 pl-3 text-gray-700 hover:text-blue-600 lg:p-0">Nuestro Obispo</a></li>
                        <li><a href="#decretos" class="block py-2 pr-4 pl-3 text-gray-700 hover:text-blue-600 lg:p-0">Decretos</a></li>
                        <li><a href="#jubilar" class="block py-2 pr-4 pl-3 text-gray-700 hover:text-blue-600 lg:p-0">Año Jubilar</a></li>
                        <li><a href="#contacto" class="block py-2 pr-4 pl-3 text-gray-700 hover:text-blue-600 lg:p-0">Contacto</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    
    <main>
        <!-- Section Banner -->
        <section id="inicio" class="w-full">
            <img src="https://firebasestorage.googleapis.com/v0/b/diocesisdesantotome.firebasestorage.app/o/LOGOS%2FEncabezado%20para%20Paginas.png?alt=media&token=38a267bb-78ba-49cb-a6b5-86d457b07473" alt="Banner Principal Diócesis de Santo Tomé" class="w-full h-auto object-cover">
        </section>

        <!-- Blog de Noticias -->
        <section id="noticias" class="py-12 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">Últimas Noticias</h2>
                <div id="news-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Skeletons de carga -->
                    <div class="news-skeleton bg-gray-200 rounded-lg shadow-lg h-96"></div>
                    <div class="news-skeleton bg-gray-200 rounded-lg shadow-lg h-96"></div>
                    <div class="news-skeleton bg-gray-200 rounded-lg shadow-lg h-96"></div>
                </div>
            </div>
        </section>
        
        <!-- Recursos -->
        <section id="recursos" class="py-12">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">Recursos</h2>
                <p class="text-center text-gray-600">Contenido para la sección de Recursos...</p>
            </div>
        </section>

        <!-- Cuidado de los frágiles -->
        <section id="fragiles" class="py-12 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">Cuidado de los Frágiles</h2>
                <p class="text-center text-gray-600">Contenido para la sección de Cuidado de los Frágiles...</p>
            </div>
        </section>
        
        <!-- Nuestro Obispo -->
        <section id="obispo" class="py-12">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">Nuestro Obispo</h2>
                 <p class="text-center text-gray-600">Contenido para la sección de Nuestro Obispo...</p>
            </div>
        </section>

        <!-- Decretos -->
        <section id="decretos" class="py-12 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">Decretos</h2>
                <p class="text-center text-gray-600">Contenido para la sección de Decretos...</p>
            </div>
        </section>

        <!-- Año Jubilar -->
        <section id="jubilar" class="py-12">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">Año Jubilar</h2>
                <p class="text-center text-gray-600">Contenido para la sección de Año Jubilar...</p>
            </div>
        </section>

        <!-- Contacto y Mapa -->
        <section id="contacto" class="py-12 bg-gray-200">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">Contacto</h2>
                <div class="flex flex-wrap -mx-4">
                    <div class="w-full lg:w-1/2 px-4 mb-8 lg:mb-0">
                        <div class="bg-white p-6 rounded-lg shadow-lg">
                           <h3 class="text-xl font-bold mb-4">Envíanos un mensaje</h3>
                            <form id="contact-form">
                                <div class="mb-4">
                                    <label for="contact-name" class="block text-gray-700">Nombre</label>
                                    <input type="text" id="contact-name" class="w-full mt-2 p-2 border rounded-lg" required>
                                </div>
                                <div class="mb-4">
                                    <label for="contact-email" class="block text-gray-700">Email</label>
                                    <input type="email" id="contact-email" class="w-full mt-2 p-2 border rounded-lg" required>
                                </div>
                                <div class="mb-4">
                                    <label for="contact-message" class="block text-gray-700">Mensaje</label>
                                    <textarea id="contact-message" rows="4" class="w-full mt-2 p-2 border rounded-lg" required></textarea>
                                </div>
                                <button type="submit" class="w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">Enviar</button>
                            </form>
                        </div>
                    </div>
                    <div class="w-full lg:w-1/2 px-4">
                        <div class="bg-white p-6 rounded-lg shadow-lg h-full">
                            <h3 class="text-xl font-bold mb-4">Nuestra Ubicación</h3>
                            <iframe src="https://www.google.com/maps/embed?pb=!1m18!m12!1m3!1d3504.604153920977!2d-56.0355446852958!3d-28.5815669824497!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9454f9644f174241%3A0x6bbf69b4c06b4a3c!2sCatedral%20Inmaculada%20Concepci%C3%B3n!5e0!3m2!1ses-419!2sar!4v1672876800000!5m2!1ses-419!2sar" width="100%" height="350" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Donar -->
        <section id="donar" class="py-12 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">Doná</h2>
                <p class="text-center text-gray-600">Contenido para la sección de Donaciones...</p>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2024 Diócesis de Santo Tomé. Todos los derechos reservados.</p>
        </div>
    </footer>
    
    <!-- Firebase -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, getDocs, query, orderBy, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCIC457rky1NFQCas3uWFfIDVRBHfdbEAQ",
            authDomain: "diocesisdesantotome.firebaseapp.com",
            projectId: "diocesisdesantotome",
            storageBucket: "diocesisdesantotome.firebasestorage.app",
            messagingSenderId: "313851932898",
            appId: "1:313851932898:web:0b7e65d0da8d09d762aebb"
        };
        
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- Mobile Menu Toggle ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // --- News Loading ---
        const newsContainer = document.getElementById('news-container');
        
        async function loadNews() {
            const q = query(collection(db, "noticias"), orderBy("createdAt", "desc"));
            const querySnapshot = await getDocs(q);
            newsContainer.innerHTML = '';
            
            if (querySnapshot.empty) {
                newsContainer.innerHTML = '<p class="text-center col-span-full">No hay noticias para mostrar.</p>';
                return;
            }

            querySnapshot.forEach((doc) => {
                const news = doc.data();
                const newsCard = document.createElement('div');
                newsCard.className = 'bg-white rounded-lg shadow-lg overflow-hidden flex flex-col';
                newsCard.innerHTML = `
                    <img src="${news.featuredImageUrl}" alt="${news.title}" class="w-full h-48 object-cover">
                    <div class="p-6 flex-grow flex flex-col">
                        <h3 class="text-xl font-bold mb-2 text-gray-800">${news.title}</h3>
                        <div class="text-gray-600 mb-4 flex-grow">${(news.summary || '').replace(/<[^>]+>/g, '').substring(0, 100)}...</div>
                        <a href="noticia.html?id=${doc.id}" target="_blank" class="mt-auto self-start text-blue-600 font-semibold hover:underline">Leer más &rarr;</a>
                    </div>
                `;
                newsContainer.appendChild(newsCard);
            });
        }
        
        // --- Contact Form ---
        const contactForm = document.getElementById('contact-form');
        contactForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = document.getElementById('contact-name').value;
            const email = document.getElementById('contact-email').value;
            const message = document.getElementById('contact-message').value;

            try {
                await addDoc(collection(db, "mensajes_contacto"), {
                    name, email, message, sentAt: serverTimestamp()
                });
                contactForm.reset();
                alert('¡Mensaje enviado con éxito!');
            } catch (error) {
                console.error("Error al enviar el mensaje: ", error);
                alert('Hubo un error al enviar el mensaje. Inténtalo de nuevo.');
            }
        });

        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', loadNews);
    </script>
</body>
</html>
